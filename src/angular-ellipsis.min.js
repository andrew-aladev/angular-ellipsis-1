"use strict";angular.module("dibari.angular-ellipsis",[]).directive("ellipsis",function(a,b){function c(a,b){var c=null;return function(){var d=this,e=arguments;null!=c&&clearTimeout(c),c=setTimeout(function(){c=null,a(d,e)},b)}}function d(a){return a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight}function e(a,b,c,e,f,g){if(null!=c){if(""==c)return void a.text("");if(a.text(c),d(b)){for(var h=c.split(e),i="",j=0,k=h.length;;){var l=Math.ceil(k/2),m=h.slice(0,j+l).join(" ");if(a.text(m),d(b)){if(k=l,1==k){a.text(i);break}}else if(i=m,j+=l,k-=l,0==k)break}if(j!=h.length)for(;;){var m=i+f;a.text(m);{if(!d(b))break;if(0==j){a.text(i);break}j--,i=h.slice(0,j).join(" ")}}}}}var f=" ",g="...",h=500;return{restrict:"A",scope:{ngShow:"=",ngBind:"=",ellipsisSeparator:"@",ellipsisSymbol:"@",ellipsisAppend:"@",ellipsisDebounceTimeout:"@"},compile:function(a,d,i){return function(a,d,i){function j(){(m!=b.innerWidth||n!=b.innerHeight)&&(m=b.innerWidth,n=b.innerHeight,(o!=k.scrollWidth||p!=k.clientWidth||q!=k.scrollHeight||r!=k.clientHeight)&&(o=k.scrollWidth,p=k.clientWidth,q=k.scrollHeight,r=k.clientHeight,l()))}var k=d[0],l=c(function(){e(d,k,a.ngBind,a.ellipsisSeparator||f,a.ellipsisSymbol||g,a.ellipsisAppend)},a.ellipsisDebounceTimeout||h);a.$watchGroup(["ngShow","ngBind","ellipsisSeparator","ellipsisSymbol","ellipsisAppend","ellipsisDebounceTimeout",function(){return k.offsetWidth>0&&0!=k.offsetHeight}],l);var m=null,n=null,o=null,p=null,q=null,r=null,s=angular.element(b);s.bind("resize",j),a.$on("$destroy",function(){s.unbind("resize",j)})}}}});